<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <style>
        
       
    </style>
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" > -->
</head>
<body>
    <h1 id="noTasksDisplay"></h1>
    <div class="ha">
        
    <div id="main">


        <div class="upperdisplay">
            <div class="guys">
                <input type="text" id="input-task" class="ed" placeholder="Enter Task">
                <button id="addTask" class="ed">Add Task</button>
                <button id="clearAllTasks" class="ed">Clear All Tasks</button>
            </div>
            
        </div>
        <div class="list-containerrr">
            <ul id="todo-container"></ul>
        </div>
        
    </div>
    <div class="extraInfo"></div>
    </div>

<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" ></script> -->
    <script>
        let input = document.querySelector('#input-task');
        let addTask = document.querySelector('#addTask');
        let clearAllTasks = document.querySelector('#clearAllTasks');
        let todoContainer = document.querySelector('#todo-container');
        let noTasksDisplay = document.querySelector('#noTasksDisplay');
        let count = 0;
        noTasksDisplay.innerHTML = 'No of Tasks: 0'
        
        
        input.addEventListener('keyup', (e)=>{
            if (input.value===""){
                alert('Please enter a task !');
            } else{
            
            if(e.keyCode === 13){
                    count+=1;
                noTasksDisplay.innerHTML = `No of Tasks: ${count}`
                    let currentDate = new Date();
                    let options = {year: 'numeric', month: 'long', day: 'numeric', timeZone: 'Asia/Kolkata' };
                    let indianDate = currentDate.toLocaleDateString('en-IN', options);
                    const currentTime = new Date();

                    const hours = currentTime.getHours();
                    const minutes = currentTime.getMinutes();
                    const seconds = currentTime.getSeconds();

                    const formattedHours = String(hours).padStart(2, '0');
                    const formattedMinutes = String(minutes).padStart(2, '0');
                    const formattedSeconds = String(seconds).padStart(2, '0');
                    let timey = `${formattedHours}:${formattedMinutes}:${formattedSeconds}`;

                
                
                let time = document.createElement('p');
                time.innerText = timey;
                time.id='time';
                let extraInfo = document.querySelector('.extraInfo');

                let showInfo = document.createElement('button');
                
                showInfo.textContent = ".";
                showInfo.id= "showInfo";
                showInfo.addEventListener('click', ()=>{
                    extraInfo.innerText = ""
                    extraInfo.classList.toggle('newDiv');
                    extraInfo.appendChild(time);

                })
                showInfo.addEventListener('blur', ()=>{
                    extraInfo.classList.toggle('extraInfo');
                })
                let li = document.createElement('li');
                li.innerHTML = input.value;
                todoContainer.appendChild(li);
                let del = document.createElement('button');
                del.textContent = "Del"
                del.id="delbtn"
                li.appendChild(del);
                let d = document.createElement('p');
                d.innerText = indianDate;
                
                d.classList.add('showdate');
                
                li.appendChild(showInfo);
                
                li.appendChild(d);
                del.addEventListener('click', ()=>{
                            li.innerHTML = "";
                            count-=1;
                            noTasksDisplay.innerHTML = `No of Tasks: ${count}`;
                    })
                    
                    localStorage.setItem('todoListy'+localStorage.length, JSON.stringify(input.value));
                   let no= JSON.parse(localStorage.getItem('todoListy'+localStorage.length));
            edit = document.createElement('button');
            edit.textContent = "edit";
            edit.id="editbtn"
            li.appendChild(edit);
            edit.addEventListener('click', ()=>{
                edit.textContent ="";
                del.textContent="";
                li.removeChild(d);
                let save = document.createElement('button');
                save.textContent = "Save";
                save.id="savebtn"
                let inputItem = document.createElement('input');
                todoContainer.appendChild(save);
                inputItem.value = li.innerText;
                li.parentNode.replaceChild(inputItem, li);
                inputItem.focus();
                save.addEventListener('click', ()=>{
                    let newList = document.createElement('li');
                    newList.innerText = inputItem.value;
                    inputItem.parentNode.replaceChild(newList, inputItem);
                    todoContainer.removeChild(save);
                    newList.appendChild(del);
                    newList.appendChild(edit);
                    newList.appendChild(checkbox)
                    edit.textContent ="edit";
                      del.textContent="Del";
                    del.addEventListener('click', ()=>{
                        newList.innerHTML = "";
                        count-=1;
                            noTasksDisplay.innerHTML = `No of Tasks: ${count}`;
                    })  
                })
                
               


                
            })
            
                        
            let checkbox = document.createElement('input');
            checkbox.type = "checkbox";
            checkbox.classList.add("checkboxx");
            li.appendChild(checkbox);

            checkbox.addEventListener('click', ()=>{
                li.classList.add("strikeThrough")

            })
            
          
            input.value="";
                
            
            input.value="";
            }}
            
        })

        addTask.addEventListener('click', ()=>{
            if (input.value===""){
                alert('Please enter a task !');
                
            }else{
                count+=1;
                noTasksDisplay.innerHTML = `No of Tasks: ${count}`
                let currentDate = new Date();
                    let options = {year: 'numeric', month: 'long', day: 'numeric', timeZone: 'Asia/Kolkata' };
                    let indianDate = currentDate.toLocaleDateString('en-IN', options);
                    const currentTime = new Date();

                    const hours = currentTime.getHours();
                    const minutes = currentTime.getMinutes();
                    const seconds = currentTime.getSeconds();

                    const formattedHours = String(hours).padStart(2, '0');
                    const formattedMinutes = String(minutes).padStart(2, '0');
                    const formattedSeconds = String(seconds).padStart(2, '0');
                    let timey = `${formattedHours}:${formattedMinutes}:${formattedSeconds}`;

                
                let time = document.createElement('p');
                time.innerText = timey;
                time.id='time';
                let extraInfo = document.querySelector('.extraInfo');

                let showInfo = document.createElement('button');
                
                showInfo.textContent = ".";
                showInfo.id= "showInfo";
                showInfo.addEventListener('click', ()=>{
                    extraInfo.innerText = ""
                    extraInfo.classList.toggle('newDiv');
                    extraInfo.appendChild(time);

                })
                showInfo.addEventListener('blur', ()=>{
                    extraInfo.classList.toggle('extraInfo');
                })
                let li = document.createElement('li');
                li.innerHTML = input.value;
                todoContainer.appendChild(li);
                let del = document.createElement('button');
                del.textContent = "Del"
                del.id="delbtn"
                li.appendChild(del);
                let d = document.createElement('p');
                d.innerText = indianDate;
                
                d.classList.add('showdate');
                
                li.appendChild(showInfo);
                
                li.appendChild(d);
                del.addEventListener('click', ()=>{
                            li.innerHTML = "";
                            count-=1;
                            noTasksDisplay.innerHTML = `No of Tasks: ${count}`;
                    })
           
           
            edit = document.createElement('button');
            edit.textContent = "edit";
            edit.id="editbtn"
            li.appendChild(edit);
            edit.addEventListener('click', ()=>{
                let save = document.createElement('button');
                save.textContent = "Save";
                save.id="savebtn"
                let inputItem = document.createElement('input');
                todoContainer.appendChild(save);
                inputItem.value = li.innerText;
                li.parentNode.replaceChild(inputItem, li);
                inputItem.focus();
                save.addEventListener('click', ()=>{
                    let newList = document.createElement('li');
                    newList.innerText = inputItem.value;
                    inputItem.parentNode.replaceChild(newList, inputItem);
                    todoContainer.removeChild(save);
                    newList.appendChild(del);
                    newList.appendChild(edit);
                    newList.appendChild(checkbox)
                    newList.appendChild(d);
                    del.addEventListener('click', ()=>{
                        newList.innerHTML = "";
                        count-=1;
                            noTasksDisplay.innerHTML = `No of Tasks: ${count}`;
                    })  
                })
                
               


                
            })
            
            
            checkbox = document.createElement('input');
            checkbox.type = "checkbox";
            checkbox.classList.add("checkboxx");
            li.appendChild(checkbox);
            
            input.value="";
                
            
            input.value="";
        }
        })
        

        clearAllTasks.addEventListener('click', ()=>{
            todoContainer.innerHTML = "";
            noTasksDisplay.innerHTML = `No of Tasks: 0`;
        })

    </script>
</body>
</html>